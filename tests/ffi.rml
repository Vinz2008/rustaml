// need LD_LIBRARY_PATH=./tests when running outside of tests folder

extern "C" function sin : float -> float ;;

let a = sin 2.3 ;;
let _ = print a ;;

// extern "C" function abs : c_type.i32 -> c_type.i32 ;;
extern "C" function abs : c_type.int -> c_type.int ;;
let a = cast int  (abs (cast c_type.int (-3))) ;;
let _ = print a ;;

extern "C" function strlen : str -> c_type.size_t ;;
let a = strlen "test" ;;
let _ = print a ;;

extern "C++" function my_cos : float -> float "libcpp_ffi.so" ;;
let a = my_cos 2.3 ;;
let _ = print a ;;

extern "C" function func_for_function : (() -> int) -> int "libcpp_ffi.so" ;;
let a = func_for_function (function _ : (() -> int) -> 2) ;;
let _ = print a ;;